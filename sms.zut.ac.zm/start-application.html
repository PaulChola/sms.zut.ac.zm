<!DOCTYPE html>
<html lang="en">


<!-- Mirrored from sms.zut.ac.zm/start-application by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 21 Jan 2026 17:39:49 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta id="csrf-token" name="csrf-token" content="fddNla9tWUMLhyBfZrF36eWwYwk8ABvlyPgtlON3">
    <meta name="author" content="Zambia University College of Technology">

    <title> Start or Continue Application | ZUT-SMS </title>

    <link href="https://fonts.googleapis.com/css?family=Roboto:400,300,100,500,700,900" rel="stylesheet" type="text/css">
<link href="global_assets/css/icons/icomoon/styles.css" rel="stylesheet" type="text/css">
<link href="assets/css/bootstrap.min.css" rel="stylesheet" type="text/css">

<link href="assets/css/bootstrap_limitless.min.css" rel="stylesheet" type="text/css">
<link href="assets/css/layout.min.css" rel="stylesheet" type="text/css">
<link href="assets/css/components.min.css" rel="stylesheet" type="text/css">
<link href="assets/css/colors.min.css" rel="stylesheet" type="text/css">
<!-- /global stylesheets -->


<link rel="stylesheet" href="assets/css/bootstrap-datepicker.min.css" type="text/css">


<link href="assets/css/qs.css" rel="stylesheet" type="text/css">


<script src="global_assets/js/main/jquery.min.js"></script>
<script src="global_assets/js/main/bootstrap.bundle.min.js"></script>

<script src="global_assets/js/plugins/loaders/blockui.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<!-- Livewire Styles --><style >[wire\:loading][wire\:loading], [wire\:loading\.delay][wire\:loading\.delay], [wire\:loading\.inline-block][wire\:loading\.inline-block], [wire\:loading\.inline][wire\:loading\.inline], [wire\:loading\.block][wire\:loading\.block], [wire\:loading\.flex][wire\:loading\.flex], [wire\:loading\.table][wire\:loading\.table], [wire\:loading\.grid][wire\:loading\.grid], [wire\:loading\.inline-flex][wire\:loading\.inline-flex] {display: none;}[wire\:loading\.delay\.none][wire\:loading\.delay\.none], [wire\:loading\.delay\.shortest][wire\:loading\.delay\.shortest], [wire\:loading\.delay\.shorter][wire\:loading\.delay\.shorter], [wire\:loading\.delay\.short][wire\:loading\.delay\.short], [wire\:loading\.delay\.default][wire\:loading\.delay\.default], [wire\:loading\.delay\.long][wire\:loading\.delay\.long], [wire\:loading\.delay\.longer][wire\:loading\.delay\.longer], [wire\:loading\.delay\.longest][wire\:loading\.delay\.longest] {display: none;}[wire\:offline][wire\:offline] {display: none;}[wire\:dirty]:not(textarea):not(input):not(select) {display: none;}:root {--livewire-progress-bar-color: #2299dd;}[x-cloak] {display: none !important;}[wire\:cloak] {display: none !important;}</style>
    <style>
        .hr {
            border-top: 1px solid #ccc;
        }

        .hr span {
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            display: inline-block;
            padding: 2px 20px;
            background-color: white;
        }
    </style>
</head>

<body
    class="">

    <div class="navbar navbar-expand-md navbar-dark px-2">

    
    <div class="collapse navbar-collapse flex-md-grow-0" id="navbar-mobile">
        
        <span class="navbar-text ml-md-3 mr-md-auto"></span>

        <ul class="navbar-nav">

                    </ul>
    </div>

    
    <div class="py-1 ml-auto">
        <a href="login.html" class="d-flex align-items-center">
            <img style="max-height: 40px; height: 90%; width: auto" class=""
                src="images/logo-v2.png" alt="Institution Logo">
            
        </a>
    </div>
</div>
    <div class="page-content">
                <div class="content-wrapper">
            <div id="page-header" class="page-header page-header-light">
    <div class="page-header-content header-elements-md-inline">
        <div class="d-flex">
            <h4 class="mt-3 mb-3">
                
                <span class="font-weight-semibold">Start or Continue Application</span>
            </h4>
            <a href="#" class="header-elements-toggle text-default d-md-none"><i class="icon-more"></i></a>
        </div>

        <div class="header-elements d-none">
            <div class="d-flex justify-content-center">
                
                
            </div>
        </div>
    </div>

    
    
</div>

            <div class="content">
                
                                <div id="ajax-alert" style="display: none"></div>

                <div wire:snapshot="{&quot;data&quot;:{&quot;nrc&quot;:null,&quot;passport&quot;:null},&quot;memo&quot;:{&quot;id&quot;:&quot;OKByvoRnbcQnMUB6GLjy&quot;,&quot;name&quot;:&quot;applications.initiate-application&quot;,&quot;path&quot;:&quot;start-application&quot;,&quot;method&quot;:&quot;GET&quot;,&quot;children&quot;:[],&quot;scripts&quot;:[],&quot;assets&quot;:[],&quot;errors&quot;:[],&quot;locale&quot;:&quot;en&quot;},&quot;checksum&quot;:&quot;11e75798017a58b68df1337c2f0ed44bc5b5130eb0ecdaf5340770d44537c814&quot;}" wire:effects="[]" wire:id="OKByvoRnbcQnMUB6GLjy" class="row justify-content-center">
    <div class="col col-md-9 col-lg-6">
        <div class="card">
            <div class="card-header header-elements-inline">
                <h5 class="card-title font-weight-semibold">Enter either your NRC or passport number</h5>
                
            </div>
            <div class="card-body">
                <div wire:ignore class="tab-pane fade show" id="collect-payment">
                    <form wire:submit.prevent="saveAndProceed">
                        <div class="form-group">
                            <label for="nrc">NRC Number</label>
                            <input type="text" class="form-control" id="nrc" wire:model="nrc"
                                placeholder="XXXXXX/XX/X" x-mask="999999/99/9">
                            <!--[if BLOCK]><![endif]--><!--[if ENDBLOCK]><![endif]-->
                        </div>

                        <div class="position-relative hr form-group mt-4 font-weight-bold h5"><span
                                class="position-absolute">OR</span>
                        </div>

                        <div class="form-group">
                            <label for="passport">Passport Number</label>
                            <input wire:model="passport" id="passport" type="text" class="form-control"
                                placeholder="Passport" x-mask="**************">
                            <!--[if BLOCK]><![endif]--><!--[if ENDBLOCK]><![endif]-->
                        </div>

                        <div class="d-flex align-items-center">
                            <button id="ajax-btn" type="submit" class="btn btn-primary">Proceed</button>
                            <a class="ml-2" href="login.html"> Go Home</a>

                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

            </div>

        </div>
    </div>

    <!-- Theme JS files -->
<script src="global_assets/js/plugins/extensions/jquery_ui/interactions.min.js"></script>
<script src="global_assets/js/plugins/forms/selects/select2.min.js"></script>


<script src="global_assets/js/plugins/forms/wizards/steps.min.js"></script>
<script src="global_assets/js/plugins/forms/styling/uniform.min.js"></script>
<script src="global_assets/js/plugins/forms/inputs/inputmask.js"></script>
<script src="global_assets/js/plugins/forms/validation/validate.min.js"></script>
<script src="global_assets/js/plugins/extensions/cookie.js"></script>


<script type="text/javascript" src="global_assets/js/plugins/notifications/sweet_alert2.min.js"></script>
<script type="text/javascript" src="global_assets/js/plugins/notifications/pnotify.min.js"></script>


<script src="global_assets/js/plugins/tables/datatables/datatables.min.js"></script>
<script src="global_assets/js/plugins/tables/datatables/extensions/jszip/jszip.min.js"></script>
<script src="global_assets/js/plugins/tables/datatables/extensions/pdfmake/pdfmake.min.js"></script>
<script src="global_assets/js/plugins/tables/datatables/extensions/pdfmake/vfs_fonts.min.js"></script>
<script src="global_assets/js/plugins/tables/datatables/extensions/buttons.min.js"></script>


<script src="global_assets/js/plugins/ui/moment/moment.min.js"></script>
<script src="global_assets/js/plugins/pickers/bootstrap-datepicker.min.js"></script>
<script src="global_assets/js/plugins/pickers/pickadate/legacy.js"></script>


<script src="global_assets/js/plugins/uploaders/fileinput/fileinput.min.js"></script>


<script src="global_assets/js/plugins/ui/fullcalendar/fullcalendar.min.js"></script>

<script src="assets/js/app.js"></script>
<script src="global_assets/js/demo_pages/form_wizard.js"></script>
<script src="global_assets/js/demo_pages/form_select2.js"></script>
<script src="global_assets/js/demo_pages/datatables_extension_buttons_html5.js"></script>
<script src="global_assets/js/demo_pages/uploader_bootstrap.js"></script>
<script src="global_assets/js/demo_pages/fullcalendar_basic.js"></script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous">
</script>


<script defer src="https://cdn.jsdelivr.net/npm/@alpinejs/mask@3.x.x/dist/cdn.min.js"></script>




<script src="assets/js/custom.js"></script>

<script src="livewire/livewire.mind557.js?id=df3a17f2"   data-csrf="fddNla9tWUMLhyBfZrF36eWwYwk8ABvlyPgtlON3" data-update-uri="/livewire/update" data-navigate-once="true"></script>
<script src="vendor/livewire-charts/app.js"></script>
<div wire:snapshot="{&quot;data&quot;:{&quot;activeComponent&quot;:null,&quot;components&quot;:[[],{&quot;s&quot;:&quot;arr&quot;}]},&quot;memo&quot;:{&quot;id&quot;:&quot;UGyjrSGT1LXSQhny7Kcp&quot;,&quot;name&quot;:&quot;livewire-ui-modal&quot;,&quot;path&quot;:&quot;start-application&quot;,&quot;method&quot;:&quot;GET&quot;,&quot;children&quot;:[],&quot;scripts&quot;:[],&quot;assets&quot;:[],&quot;errors&quot;:[],&quot;locale&quot;:&quot;en&quot;},&quot;checksum&quot;:&quot;0e5a8fd7b82ee7bfcf5e63d2cca49ce91da9b00864534401cbdb219b2f9902c0&quot;}" wire:effects="{&quot;listeners&quot;:[&quot;openModal&quot;,&quot;destroyComponent&quot;]}" wire:id="UGyjrSGT1LXSQhny7Kcp">
    <!--[if BLOCK]><![endif]-->        <script>
            (()=>{var t,e={646:()=>{function t(t){return function(t){if(Array.isArray(t))return e(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,o){if(t){if("string"==typeof t)return e(t,o);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?e(t,o):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var o=0,n=Array(e);o<e;o++)n[o]=t[o];return n}window.LivewireUIModal=function(){return{show:!1,showActiveComponent:!0,activeComponent:!1,componentHistory:[],modalWidth:null,listeners:[],getActiveComponentModalAttribute:function(t){if(void 0!==this.$wire.get("components")[this.activeComponent])return this.$wire.get("components")[this.activeComponent].modalAttributes[t]},closeModalOnEscape:function(t){if(!1!==this.getActiveComponentModalAttribute("closeOnEscape")&&this.closingModal("closingModalOnEscape")){var e=!0===this.getActiveComponentModalAttribute("closeOnEscapeIsForceful");this.closeModal(e)}},closeModalOnClickAway:function(t){!1!==this.getActiveComponentModalAttribute("closeOnClickAway")&&this.closingModal("closingModalOnClickAway")&&this.closeModal(!0)},closingModal:function(t){var e=this.$wire.get("components")[this.activeComponent].name,o={id:this.activeComponent,closing:!0};return Livewire.dispatchTo(e,t,o),o.closing},closeModal:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!1!==this.show){if(!0===this.getActiveComponentModalAttribute("dispatchCloseEvent")){var n=this.$wire.get("components")[this.activeComponent].name;Livewire.dispatch("modalClosed",{name:n})}if(!0===this.getActiveComponentModalAttribute("destroyOnClose")&&Livewire.dispatch("destroyComponent",{id:this.activeComponent}),e>0)for(var i=0;i<e;i++){if(o){var s=this.componentHistory[this.componentHistory.length-1];Livewire.dispatch("destroyComponent",{id:s})}this.componentHistory.pop()}var r=this.componentHistory.pop();r&&!t&&r?this.setActiveModalComponent(r,!0):this.setShowPropertyTo(!1)}},setActiveModalComponent:function(t){var e=this,o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.setShowPropertyTo(!0),this.activeComponent!==t){!1!==this.activeComponent&&!1===o&&this.componentHistory.push(this.activeComponent);var n=50;!1===this.activeComponent?(this.activeComponent=t,this.showActiveComponent=!0,this.modalWidth=this.getActiveComponentModalAttribute("maxWidthClass")):(this.showActiveComponent=!1,n=400,setTimeout((function(){e.activeComponent=t,e.showActiveComponent=!0,e.modalWidth=e.getActiveComponentModalAttribute("maxWidthClass")}),300)),this.$nextTick((function(){var o,i=null===(o=e.$refs[t])||void 0===o?void 0:o.querySelector("[autofocus]");i&&setTimeout((function(){i.focus()}),n)}))}},focusables:function(){return t(this.$el.querySelectorAll("a, button, input:not([type='hidden']), textarea, select, details, [tabindex]:not([tabindex='-1'])")).filter((function(t){return!t.hasAttribute("disabled")}))},firstFocusable:function(){return this.focusables()[0]},lastFocusable:function(){return this.focusables().slice(-1)[0]},nextFocusable:function(){return this.focusables()[this.nextFocusableIndex()]||this.firstFocusable()},prevFocusable:function(){return this.focusables()[this.prevFocusableIndex()]||this.lastFocusable()},nextFocusableIndex:function(){return(this.focusables().indexOf(document.activeElement)+1)%(this.focusables().length+1)},prevFocusableIndex:function(){return Math.max(0,this.focusables().indexOf(document.activeElement))-1},setShowPropertyTo:function(t){var e=this;this.show=t,t?document.body.classList.add("overflow-y-hidden"):(document.body.classList.remove("overflow-y-hidden"),setTimeout((function(){e.activeComponent=!1,e.$wire.resetState()}),300))},init:function(){var t=this;this.modalWidth=this.getActiveComponentModalAttribute("maxWidthClass"),this.listeners.push(Livewire.on("closeModal",(function(e){var o,n,i;t.closeModal(null!==(o=null==e?void 0:e.force)&&void 0!==o&&o,null!==(n=null==e?void 0:e.skipPreviousModals)&&void 0!==n?n:0,null!==(i=null==e?void 0:e.destroySkipped)&&void 0!==i&&i)}))),this.listeners.push(Livewire.on("activeModalComponentChanged",(function(e){var o=e.id;t.setActiveModalComponent(o)})))},destroy:function(){this.listeners.forEach((function(t){t()}))}}}},761:()=>{}},o={};function n(t){var i=o[t];if(void 0!==i)return i.exports;var s=o[t]={exports:{}};return e[t](s,s.exports,n),s.exports}n.m=e,t=[],n.O=(e,o,i,s)=>{if(!o){var r=1/0;for(u=0;u<t.length;u++){for(var[o,i,s]=t[u],a=!0,c=0;c<o.length;c++)(!1&s||r>=s)&&Object.keys(n.O).every((t=>n.O[t](o[c])))?o.splice(c--,1):(a=!1,s<r&&(r=s));if(a){t.splice(u--,1);var l=i();void 0!==l&&(e=l)}}return e}s=s||0;for(var u=t.length;u>0&&t[u-1][2]>s;u--)t[u]=t[u-1];t[u]=[o,i,s]},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t={931:0,994:0};n.O.j=e=>0===t[e];var e=(e,o)=>{var i,s,[r,a,c]=o,l=0;if(r.some((e=>0!==t[e]))){for(i in a)n.o(a,i)&&(n.m[i]=a[i]);if(c)var u=c(n)}for(e&&e(o);l<r.length;l++)s=r[l],n.o(t,s)&&t[s]&&t[s][0](),t[s]=0;return n.O(u)},o=self.webpackChunk=self.webpackChunk||[];o.forEach(e.bind(null,0)),o.push=e.bind(null,o.push.bind(o))})(),n.O(void 0,[994],(()=>n(646)));var i=n.O(void 0,[994],(()=>n(761)));i=n.O(i)})();
        </script>
    <!--[if ENDBLOCK]><![endif]-->
    <!--[if BLOCK]><![endif]--><!--[if ENDBLOCK]><![endif]-->

    <div style="z-index: 100; top: 0; left: 0" x-data="LivewireUIModal()" x-on:close.stop="setShowPropertyTo(false)"
        x-on:keydown.escape.window="show && closeModalOnEscape()" x-show="show"
        class="position-fixed w-100 h-100 z-10 overflow-auto" style="display: none;">
        <div class="d-flex align-items-end justify-content-center min-vh-100 text-center d-sm-block">
            <div x-show="show" x-on:click="closeModalOnClickAway()" x-transition:enter="ease-out duration-300"
                x-transition:enter-start="opacity-0" x-transition:enter-end="opacity-100"
                x-transition:leave="ease-in duration-200" x-transition:leave-start="opacity-100"
                x-transition:leave-end="opacity-0" class="position-fixed w-100 h-100 transition-all">
                <div class="position-absolute w-100 h-100 bg-dark opacity-0"></div>
            </div>

            <span class="d-none d-sm-inline-block align-middle h-100" aria-hidden="true">&#8203;</span>

            <div x-show="show && showActiveComponent" x-transition:enter="ease-out duration-300"
                x-transition:enter-start="opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"
                x-transition:enter-end="opacity-100 translate-y-0 sm:scale-100"
                x-transition:leave="ease-in duration-200"
                x-transition:leave-start="opacity-100 translate-y-0 sm:scale-100"
                x-transition:leave-end="opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"
                x-bind:class="modalWidth"
                class="position-relative d-inline-block w-100 align-bottom bg-white rounded-lg text-left overflow-hidden shadow-lg transition-all my-sm-5 align-middle"
                id="modal-container" x-trap.noscroll.inert="show && showActiveComponent" aria-modal="true">
                <!--[if BLOCK]><![endif]-->                <!--[if ENDBLOCK]><![endif]-->
            </div>
        </div>
    </div>

</div>
<script>
    // Notifications

    
    
    
    
    
    
    
    
    

    function pop(data) {
        swal({
            title: data.title ? data.title : 'Oops...',
            text: data.msg,
            icon: data.type
        });
    }

    function flash(data) {
        new PNotify({
            text: data.msg,
            type: data.type,
            hide: true
            //hide: data.type !== "danger"
        });
    }

    function confirmDelete(id) {
        swal({
            title: "Are you sure?",
            text: "Once deleted, you will not be able to recover this item!",
            icon: "warning",
            buttons: true,
            dangerMode: true
        }).then(function(willDelete) {
            if (willDelete) {
                $('form#item-delete-' + id).submit();
            }
        });

    }

    function confirmApprove(id) {
        swal({
            title: "Are you sure?",
            text: "Confirm that you want to approve this action",
            icon: "info",
            buttons: true,
            dangerMode: true
        }).then(function(willApprove) {
            if (willApprove) {
                $('form#item-approve-' + id).submit();
            }
        });
    }

    function confirmAction(id, title, text) {
        swal({
            title: title,
            text: text,
            icon: "info",
            buttons: true,
            dangerMode: true
        }).then(function(willConfirm) {
            if (willConfirm) {
                $('form#item-confirm-' + id).submit();
            }
        });
    }

    function confirmReset(id) {
        swal({
            title: "Are you sure?",
            text: "This will reset this item to default state",
            icon: "warning",
            buttons: true,
            dangerMode: true
        }).then(function(willDelete) {
            if (willDelete) {
                $('form#item-reset-' + id).submit();
            }
        });
    }

    $('form#ajax-reg').on('submit', function(ev) {
        ev.preventDefault();
        submitForm($(this), 'store');
        //$('#ajax-reg-t-0').get(0).click();
        var div = $(this).data('reload');
        div ? reloadDiv(div) : '';
    });

    $('form.ajax-pay').on('submit', function(ev) {
        ev.preventDefault();
        submitForm($(this), 'store');

        //        Retrieve IDS
        var form_id = $(this).attr('id');
        var td_amt = $('td#amt-' + form_id);
        var td_amt_paid = $('td#amt_paid-' + form_id);
        var td_bal = $('td#bal-' + form_id);
        var input = $('#val-' + form_id);

        // Get Values
        var amt = parseInt(td_amt.data('amount'));
        var amt_paid = parseInt(td_amt_paid.data('amount'));
        var amt_input = parseInt(input.val());

        //        Update Values
        amt_paid = amt_paid + amt_input;
        var bal = amt - amt_paid;

        td_bal.text('' + bal);
        td_amt_paid.text('' + amt_paid).data('amount', '' + amt_paid);
        input.attr('max', bal);
        bal < 1 ? $('#' + form_id).fadeOut('slow').remove() : '';
    });
    //start
    $('form.ajax-store').on('submit', function(ev) {
        ev.preventDefault();
        submitForm($(this), 'store');
        var div = $(this).data('reload');
        div ? reloadDiv(div) : '';
    });

    $('form.ajax-update').on('submit', function(ev) {
        ev.preventDefault();
        submitForm($(this));
        var div = $(this).data('reload');
        div ? reloadDiv(div) : '';
    });

    $('.download-receipt').on('click', function(ev) {
        ev.preventDefault();
        $.get($(this).attr('href'));
        flash({
            msg: 'Download in Progress',
            type: 'info'
        });
    });

    function reloadDiv(div) {
        var url = window.location.href;
        url = url + ' ' + div;
        $(div).load(url);
    }

    function submitForm(form, formType) {
        var btn = form.find('button[type=submit]');
        disableBtn(btn);
        var ajaxOptions = {
            url: form.attr('action'),
            type: 'POST',
            cache: false,
            processData: false,
            dataType: 'json',
            contentType: false,
            data: new FormData(form[0])
        };
        var req = $.ajax(ajaxOptions);
        req.done(function(resp) {
            resp.ok && resp.msg ?
                flash({
                    msg: resp.msg,
                    type: 'success'
                }) :
                flash({
                    msg: resp.msg,
                    type: 'danger'
                });
            hideAjaxAlert();
            enableBtn(btn);
            formType == 'store' ? clearForm(form) : '';
            scrollTo('body');
            return resp;
        });
        req.fail(function(e) {
            if (e.status == 422) {
                var errors = e.responseJSON.errors;
                displayAjaxErr(errors);
            }
            if (e.status == 500) {
                displayAjaxErr([e.status + ' ' + e.statusText +
                    ' Please Check for Duplicate entry or Contact School Administrator/IT Personnel'
                ])
            }
            if (e.status == 404) {
                displayAjaxErr([e.status + ' ' + e.statusText + ' - Requested Resource or Record Not Found'])
            }
            enableBtn(btn);
            return e.status;
        });
    }

    function disableBtn(btn) {
        var btnText = btn.data('text') ? btn.data('text') : 'Submitting';
        btn.prop('disabled', true).html('<i class="icon-spinner mr-2 spinner"></i>' + btnText);
    }

    function enableBtn(btn) {
        var btnText = btn.data('text') ? btn.data('text') : 'Submit Form';
        btn.prop('disabled', false).html(btnText + '<i class="icon-paperplane ml-2"></i>');
    }

    function displayAjaxErr(errors) {
        $('#ajax-alert').show().html(
            ' <div class="alert alert-danger border-0 alert-dismissible" id="ajax-msg"><button type="button" class="close" data-dismiss="alert"><span>&times;</span></button></div>'
        );
        $.each(errors, function(k, v) {
            $('#ajax-msg').append('<span><i class="icon-arrow-right5"></i> ' + v + '</span><br/>');
        });
        scrollTo('body');
    }

    function scrollTo(el) {
        $('html, body').animate({
            scrollTop: $(el).offset().top
        }, 1000);
    }

    function hideAjaxAlert() {
        $('#ajax-alert').hide();
    }

    function clearForm(form) {
        form.find('.select, .select-search').val([]).select2({
            placeholder: 'Select...'
        });
        form[0].reset();
    }

    //academic classes for assessements
    function getAcClassesPD(ac_id) {
        var url = 'login.html';
        url = url.replace(':id', ac_id);
        var classId = $('#classID');
        var classIds = $('.classID');

        $.ajax({
            dataType: 'json',
            url: url,
            success: function(resp) {
                classId.empty();
                classId.append($('<option>', {
                    value: '',
                    text: 'Choose ...'
                }));
                classIds.empty();
                classIds.append($('<option>', {
                    value: '',
                    text: 'Choose ...'
                }));
                $.each(resp, function(i, data) {
                    classId.append($('<option>', {
                        value: data.id,
                        text: data.course.code + ' - ' + data.course.name
                    }));
                    classIds.append($('<option>', {
                        value: data.id,
                        text: data.course.code + ' - ' + data.course.name
                    }));
                });
            }
        })
    }

    // Bind the function to the change event of the #ac_id input
    $('#ac_id').on('change', function() {
        getAcClassesPDER();
    });

    function getAcClassesPDER() {
        var ac_ids = $('#ac_id').val(); // Assuming ac_id is a multiple select input
        var classId = $('#class_id');
        classId.empty();
        classId.append($('<option>', {
            value: '',
            text: 'Choose ...'
        }));

        // Iterate over each academic period ID
        $.each(ac_ids, function(index, ac_id) {
            var url = 'login.html';
            url = url.replace(':id', ac_id);

            $.ajax({
                dataType: 'json',
                url: url,
                async: false, // Ensures synchronous processing
                success: function(resp) {
                    $.each(resp, function(i, data) {
                        classId.append($('<option>', {
                            value: data.id,
                            text: data.course.code + ' - ' + data.course.name
                        }));
                    });
                }
            });
        });
    }


    function getAcClassesPDERs() {
        var ac_id = $('#ac_id').val();
        var url = 'login.html';
        url = url.replace(':id', ac_id);
        var classId = $('#class_id');

        $.ajax({
            dataType: 'json',
            url: url,
            success: function(resp) {
                classId.empty();
                classId.append($('<option>', {
                    value: '',
                    text: 'Choose ...'
                }));
                $.each(resp, function(i, data) {
                    classId.append($('<option>', {
                        value: data.id,
                        text: data.course.code + ' - ' + data.course.name
                    }));
                });
            }
        })
    }

    //accommodation start
    function getHostelRooms() {
        var hostel_id = $('#hostel_id').val();
        var url = 'login.html';
        url = url.replace(':id', hostel_id);
        var room_id = $('#room_id');

        $.ajax({
            dataType: 'json',
            url: url,
            success: function(resp) {
                room_id.empty();
                room_id.append($('<option>', {
                    value: '',
                    text: 'Choose ...'
                }));
                $.each(resp, function(i, data) {
                    room_id.append($('<option>', {
                        value: data.id,
                        text: data.room_number
                    }));
                });
            }
        })
    }

    function getHostelRoomsOne() {
        var hostel_id = $('#hostel_ids').val();
        var url = 'login.html';
        url = url.replace(':id', hostel_id);
        var room_id = $('#room_ids');

        $.ajax({
            dataType: 'json',
            url: url,
            success: function(resp) {
                room_id.empty();
                room_id.append($('<option>', {
                    value: '',
                    text: 'Choose ...'
                }));
                $.each(resp, function(i, data) {
                    room_id.append($('<option>', {
                        value: data.id,
                        text: data.room_number
                    }));
                });
            }
        })
    }

    function getRoomBedSpaces() {
        var room_id = $('#room_id').val();
        var url = 'login.html';
        url = url.replace(':id', room_id);
        var bed_space_id = $('#bed_space_id');
        var student_id = $('#student_id');

        $.ajax({
            dataType: 'json',
            url: url,
            success: function(resp) {
                bed_space_id.empty();
                student_id.empty();
                bed_space_id.append($('<option>', {
                    value: '',
                    text: 'Choose ...'
                }));
                student_id.append($('<option>', {
                    value: '',
                    text: 'Choose ...'
                }));
                $.each(resp.students, function(i, data) {
                    student_id.append($('<option>', {
                        value: data.id,
                        text: `${data.user.first_name} ${data.user.last_name} (${data.id})`
                    }));
                });
                $.each(resp.spaces, function(i, data) {
                    bed_space_id.append($('<option>', {
                        value: data.id,
                        text: data.bed_number
                    }));
                });
            }
        })
    }

    function getRoomBedSpacesStudent() {
        var room_id = $('#room_ids').val();
        var url = 'login.html';
        url = url.replace(':id', room_id);
        var bed_space_id = $('#bed_space_ids');
        var student_id = $('#student_ids');

        $.ajax({
            dataType: 'json',
            url: url,
            success: function(resp) {
                bed_space_id.empty();
                student_id.empty();
                bed_space_id.append($('<option>', {
                    value: '',
                    text: 'Choose ...'
                }));
                $.each(resp.spaces, function(i, data) {
                    bed_space_id.append($('<option>', {
                        value: data.id,
                        text: data.bed_number
                    }));
                });
                student_id.append($('<option>', {
                    value: '',
                    text: 'Choose ...'
                }));
                $.each(resp.students, function(i, data) {
                    student_id.append($('<option>', {
                        value: data.id,
                        text: `${data.user.first_name} ${data.user.last_name} (${data.id})`
                    }));
                });
            }
        })
    }

    //accommodation end
    $('.edit-total-link').on('click', function() {

        var row = $(this).closest('tr');
        row.find('.display-mode').hide();
        row.find('.edit-mode').show();
    });

    //});
    function EnterResults(classID, total, type) {
        let actual = $('#class' + classID).val();

        var displaymode = $('#display-mode' + classID);
        var textContent = displaymode.text();
        var input = $('#class' + classID);

        var totalElement = $(".assess-total");

        // Get the text content and extract the total value
        var totalText = totalElement.text();
        var totalValue = totalText.match(/\d+/);

        var newValues = ((actual / 100) * total).toFixed(2);

        let id = $('#gradeid' + classID).val();
        if (type === 1) {
            let url = 'login.html';
            $.ajax({
                url: url, // Replace with the actual route
                method: 'POST',
                dataType: 'json',
                data: {
                    total: newValues,
                    id: id,
                },
                success: function(resp) {
                    // Update the display mode with the new value
                    console.log(resp)
                    if (resp.ok === true) {
                        displaymode.text(newValues);
                        displaymode.show();
                        input.hide();
                    } else {
                        displaymode.text(textContent);
                        displaymode.show();
                        input.hide();
                    }
                    resp.ok && resp.msg ? flash({
                        msg: resp.msg,
                        type: 'success'
                    }) : flash({
                        msg: resp.msg,
                        type: 'danger'
                    });
                },
                error: function(xhr, status, error) {
                    flash({
                        msg: error,
                        type: 'danger'
                    })
                }
            });
        } else {
            let url = 'login.html';
            var ac_id = $('input[name="ac_id"]').val();
            var assess_type_id = $('input[name="assess_type_id"]').val();
            var course_id = $('input[name="course_id"]').val();

            $.ajax({
                url: url, // Replace with the actual route
                method: 'POST',
                dataType: 'json',
                data: {
                    total: newValues,
                    id: classID,
                    ac_id: ac_id,
                    assess_type_id: assess_type_id,
                    course_id: course_id,
                },
                success: function(resp) {
                    // Update the display mode with the new value
                    console.log(resp)
                    if (resp.ok === true) {
                        displaymode.text(newValues);
                        displaymode.show();
                        input.hide();
                    } else {
                        displaymode.text(textContent);
                        displaymode.show();
                        input.hide();
                    }
                    resp.ok && resp.msg ? flash({
                        msg: resp.msg,
                        type: 'success'
                    }) : flash({
                        msg: resp.msg,
                        type: 'danger'
                    });
                },
                error: function(xhr, status, error) {
                    flash({
                        msg: error,
                        type: 'danger'
                    })
                }
            });
        }
    }

    $.ajaxSetup({
        headers: {
            'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
        }
    });

    function updateExamResults(classID) {
        //date
        let newValuesendDate = $('#enddate' + classID).val();
        var displaymodedate = $('#display-mode-enddate' + classID);
        var inputdate = $('#enddate' + classID);

        let newValues = $('#class' + classID).val();
        var displaymode = $('#display-mode' + classID);
        var input = $('#class' + classID);

        let url = 'assessments/updateExams/_id.html';
        url = url.replace(':id', classID);
        // Perform an AJAX request to update the database with the new value
        // You can use Laravel's route and controller for this
        console.log(newValues);
        $.ajax({
            url: url, // Replace with the actual route
            method: 'POST',
            dataType: 'json',
            data: {
                total: newValues,
                end_date: newValuesendDate,
            },
            success: function(resp) {
                // Update the display mode with the new value
                displaymode.text(newValues);
                displaymode.show();
                input.hide();

                displaymodedate.text(newValuesendDate);
                displaymodedate.show();
                inputdate.hide();

                resp.ok && resp.msg ? flash({
                    msg: resp.msg,
                    type: 'success'
                }) : flash({
                    msg: resp.msg,
                    type: 'danger'
                });
            },
            error: function(xhr, status, error) {
                flash({
                    msg: error,
                    type: 'danger'
                })
            }
        });
    }

    function downloadCSVtemplateAll() {
        let url = 'login.html';
        var classID = $('input[name="classIDTemplate"]').val();
        var AssessID = $('input[name="AssessIDTemplate"]').val();
        $.ajax({
            url: url, // Replace with the actual route
            method: 'POST',
            dataType: 'json',
            data: {
                classId: classID,
                // assessID: AssessID
            },
            success: function(resp) {
                // resp.ok && resp.msg ? flash({msg: resp.msg, type: 'success'}) : flash({
                //     msg: resp.msg,
                //     type: 'danger'
                // });

                if (resp.fileUrl) {
                    // If the response contains a file URL, trigger the download
                    var link = document.createElement('a');
                    link.href = resp.fileUrl;
                    link.download = 'results_upload_template.csv'; // Set the default file name
                    link.click();
                } else if (resp.ok && resp.msg) {
                    flash({
                        msg: resp.msg,
                        type: 'success'
                    });
                } else {
                    flash({
                        msg: resp.msg,
                        type: 'danger'
                    });
                }

            },
            error: function(xhr, status, error) {
                flash({
                    msg: error,
                    type: 'danger'
                })
            }
        });
    }

    function downloadCSVtemplate() {
        let url = 'login.html';
        var classID = $('input[name="classIDTemplate"]').val();
        var AssessID = $('input[name="AssessIDTemplate"]').val();
        $.ajax({
            url: url, // Replace with the actual route
            method: 'POST',
            dataType: 'json',
            data: {
                classId: classID,
                assessID: AssessID
            },
            success: function(resp) {
                // resp.ok && resp.msg ? flash({msg: resp.msg, type: 'success'}) : flash({
                //     msg: resp.msg,
                //     type: 'danger'
                // });

                if (resp.fileUrl) {
                    // If the response contains a file URL, trigger the download
                    var link = document.createElement('a');
                    link.href = resp.fileUrl;
                    link.download = 'results_upload_template.csv'; // Set the default file name
                    link.click();
                } else if (resp.ok && resp.msg) {
                    flash({
                        msg: resp.msg,
                        type: 'success'
                    });
                } else {
                    flash({
                        msg: resp.msg,
                        type: 'danger'
                    });
                }

            },
            error: function(xhr, status, error) {
                flash({
                    msg: error,
                    type: 'danger'
                })
            }
        });
    }

    function modifyMarks(id, student, code, name, grades) {
        console.log(student);

        const user = JSON.parse(student);
        //console.log(user);
        //console.log(typeof user );
        //$('#staticBackdrop').modal('show');
        var modalBody = $('#staticBackdrop .modal-body');
        modalBody.empty();
        const data = JSON.parse(grades);
        //console.log(data);


        // Check if the response is valid and contains data
        if (data && data.length > 0) {
            // Assuming that you want to update the modal body with data from the response

            var title = $('#staticBackdropLabel');
            title.text(user.first_name + ' ' + user.last_name);
            // Clear the existing content in the modal body
            modalBody.empty();
            var assessmentHtml = '<div>';
            assessmentHtml += '<p>Student Number : ' + id + '</p>';
            assessmentHtml += '<p class="title">Code: ' + code + '</p>';
            assessmentHtml += '<p class="header">Title: ' + name + '</p>';
            assessmentHtml += '</div>';

            modalBody.append(assessmentHtml);
            data.forEach(function(assessment) {
                if (parseInt(assessment.student_id) === parseInt(id)) {
                    //var assessmentHtml = '<div>';
                    var assessmentHtml = '<div class="assessment" data-outof="' + assessment.assessment_type
                        .class_assessment.total + '" data-id="' +
                        assessment.id + '" data-code="' + code + '">';
                    assessmentHtml += '<p>Assessment: ' + assessment.assessment_type.name + '</p>';
                    assessmentHtml += '<p>' + assessment.total + ' Out of: ' + assessment.assessment_type
                        .class_assessment.total + '</p>';
                    // assessmentHtml += '<label for="total">Total:</label>';
                    //assessmentHtml += '<input class="form-control total-input" type="number" name="total" value="' + assessment.marks + '">';
                    assessmentHtml +=
                        '<input class="form-control total-input" type="number" name="total" value="0">';
                    assessmentHtml += '<hr>';
                    // Add more fields as needed

                    assessmentHtml += '</div>';

                    modalBody.append(assessmentHtml);
                }
            });
            var assessmentHtml = '<br/>';
            assessmentHtml += ' <div class="form-check">';
            assessmentHtml +=
                '    <input class="form-check-input" value="0" type="radio" name="operation" id="operation1" >';
            assessmentHtml += '        <label class="form-check-label" for="flexRadioDefault1">Subtract</label>';
            assessmentHtml += '</div>';
            assessmentHtml += '<div class="form-check">';
            assessmentHtml +=
                '    <input class="form-check-input" value="1" type="radio" name="operation" id="operation2" >';
            assessmentHtml += '        <label class="form-check-label" for="flexRadioDefault2">Add</label>';
            assessmentHtml += '</div>';
            modalBody.append(assessmentHtml);

            // Show the modal
            $('#staticBackdrop').modal('show');
        } else {
            // Handle the case where there is no data or an error occurred
            flash({
                msg: 'No Assessments found for the course',
                type: 'danger'
            })
        }
    }


    function modifyMarksCAsL(id, student, code, name, grades) {
        // console.log(student);

        // const user = JSON.parse(student);
        //console.log(user);
        //console.log(typeof user );
        //$('#staticBackdrop').modal('show');
        var modalBody = $('#staticBackdrop .modal-body');
        modalBody.empty();
        //  const data = JSON.parse(grades);


        // const user = JSON.parse(decodeURIComponent(student));
        const data = JSON.parse(decodeURIComponent(grades));
        // console.log(data);


        // Check if the response is valid and contains data
        if (data && data.length > 0) {
            // Assuming that you want to update the modal body with data from the response
            var title = $('#staticBackdropLabel');
            title.text(student);
            // Clear the existing content in the modal body
            modalBody.empty();
            var assessmentHtml = '<div>';
            assessmentHtml += '<p>Student Number : ' + id + '</p>';
            assessmentHtml += '<p class="title">Code: ' + code + '</p>';
            assessmentHtml += '<p class="header">Title: ' + name + '</p>';
            assessmentHtml += '</div>';

            modalBody.append(assessmentHtml);
            data.forEach(function(assessment) {
                //   if (parseInt(assessment.student_id) === parseInt(id)) {
                //var assessmentHtml = '<div>';
                var assessmentHtml = '<div class="assessment" data-outof="' + assessment.outof +
                    '" data-id="' +
                    assessment.id + '" data-code="' + code + '">';
                assessmentHtml += '<p>Assessment: ' + assessment.type + '</p>';
                assessmentHtml += '<p>' + assessment.total + ' Out of: ' + assessment.outof + '</p>';
                // assessmentHtml += '<label for="total">Total:</label>';
                //assessmentHtml += '<input class="form-control total-input" type="number" name="total" value="' + assessment.marks + '">';
                assessmentHtml +=
                    '<input class="form-control total-input" type="number" name="total" value="0">';
                assessmentHtml += '<hr>';
                // Add more fields as needed

                assessmentHtml += '</div>';

                modalBody.append(assessmentHtml);
                //  }
            });
            var assessmentHtml = '<br/>';
            assessmentHtml += ' <div class="form-check">';
            assessmentHtml +=
                '    <input class="form-check-input" value="0" type="radio" name="operation" id="operation1" >';
            assessmentHtml += '        <label class="form-check-label" for="flexRadioDefault1">Subtract</label>';
            assessmentHtml += '</div>';
            assessmentHtml += '<div class="form-check">';
            assessmentHtml +=
                '    <input class="form-check-input" value="1" type="radio" name="operation" id="operation2" >';
            assessmentHtml += '        <label class="form-check-label" for="flexRadioDefault2">Add</label>';
            assessmentHtml += '</div>';
            modalBody.append(assessmentHtml);

            // Show the modal
            $('#staticBackdrop').modal('show');
        } else {
            // Handle the case where there is no data or an error occurred
            flash({
                msg: 'No Assessments found for the course',
                type: 'danger'
            })
        }
    }


    function modifyMarksExam(id, student, code, name, grades) {
        ///const user = JSON.parse(student);
        console.log(id);
        //$('#staticBackdrop').modal('show');
        var modalBody = $('#staticBackdrop .modal-body');
        modalBody.empty();
        const data = JSON.parse(grades);
        // console.log(data);

        // Check if the response is valid and contains data
        if (data && data.length > 0) {
            // Assuming that you want to update the modal body with data from the response

            var title = $('#staticBackdropLabel');
            title.text(student);
            // Clear the existing content in the modal body
            modalBody.empty();
            var assessmentHtml = '<div>';
            assessmentHtml += '<p>Student Number : ' + id + '</p>';
            assessmentHtml += '<p class="title">Code: ' + code + '</p>';
            assessmentHtml += '<p class="header">Title: ' + name + '</p>';
            assessmentHtml += '</div>';

            modalBody.append(assessmentHtml);
            data.forEach(function(assessment) {
                if (assessment.student_id === parseInt(id)) {
                    //var assessmentHtml = '<div>';
                    var assessmentHtml = '<div class="assessment" data-outof="' + assessment.outof +
                        '" data-id="' +
                        assessment.id + '" data-code="' + code + '">';
                    assessmentHtml += '<p>Assessment: Exam</p>';
                    assessmentHtml += '<p>' + assessment.exam + ' Out of: ' + assessment.outof + '</p>';
                    // assessmentHtml += '<label for="total">Total:</label>';
                    //assessmentHtml += '<input class="form-control total-input" type="number" name="total" value="' + assessment.marks + '">';
                    assessmentHtml +=
                        '<input class="form-control total-input" type="number" name="total" value="0">';
                    assessmentHtml += '<hr>';
                    // Add more fields as needed

                    assessmentHtml += '</div>';

                    modalBody.append(assessmentHtml);
                }
            });
            var assessmentHtml = '<br/>';
            assessmentHtml += ' <div class="form-check">';
            assessmentHtml +=
                '    <input class="form-check-input" value="0" type="radio" name="operation" id="operation1" >';
            assessmentHtml += '        <label class="form-check-label" for="flexRadioDefault1">Subtract</label>';
            assessmentHtml += '</div>';
            assessmentHtml += '<div class="form-check">';
            assessmentHtml +=
                '    <input class="form-check-input" value="1" type="radio" name="operation" id="operation2" >';
            assessmentHtml += '        <label class="form-check-label" for="flexRadioDefault2">Add</label>';
            assessmentHtml += '</div>';
            modalBody.append(assessmentHtml);

            // Show the modal
            $('#staticBackdrop').modal('show');
        } else {
            // Handle the case where there is no data or an error occurred
            flash({
                msg: 'No Assessments found for the course',
                type: 'danger'
            })
        }
    }

    function modifyMarksExamAjax(id, student, code, name, grades) {

        var modalBody = $('#staticBackdrop .modal-body');
        modalBody.empty();

        const user = JSON.parse(decodeURIComponent(student));
        const data = JSON.parse(decodeURIComponent(grades));
        // console.log(data);

        // Check if the response is valid and contains data
        if (data && data.length > 0) {
            // Assuming that you want to update the modal body with data from the response

            var title = $('#staticBackdropLabel');
            title.text(user.first_name + ' ' + user.last_name);
            // Clear the existing content in the modal body
            modalBody.empty();
            var assessmentHtml = '<div>';
            assessmentHtml += '<p>Student Number : ' + id + '</p>';
            assessmentHtml += '<p class="title">Code: ' + code + '</p>';
            assessmentHtml += '<p class="header">Title: ' + name + '</p>';
            assessmentHtml += '</div>';

            modalBody.append(assessmentHtml);
            //data.each(function (index, assessment) {
            data.forEach(function(assessment) {
                if (assessment.student_id === parseInt(id)) {
                    //var assessmentHtml = '<div>';
                    var assessmentHtml = '<div class="assessment" data-outof="' + assessment.outof +
                        '" data-id="' +
                        assessment.id + '" data-code="' + code + '">';
                    assessmentHtml += '<p>Assessment: Exam</p>';
                    assessmentHtml += '<p>' + assessment.exam + ' Out of: ' + assessment.outof + '</p>';
                    // assessmentHtml += '<label for="total">Total:</label>';
                    //assessmentHtml += '<input class="form-control total-input" type="number" name="total" value="' + assessment.marks + '">';
                    assessmentHtml +=
                        '<input class="form-control total-input" type="number" name="total" value="0">';
                    assessmentHtml += '<hr>';
                    // Add more fields as needed

                    assessmentHtml += '</div>';

                    modalBody.append(assessmentHtml);
                }
            });
            var assessmentHtml = '<br/>';
            assessmentHtml += ' <div class="form-check">';
            assessmentHtml +=
                '    <input class="form-check-input" value="0" type="radio" name="operation" id="operation1" >';
            assessmentHtml += '        <label class="form-check-label" for="flexRadioDefault1">Subtract</label>';
            assessmentHtml += '</div>';
            assessmentHtml += '<div class="form-check">';
            assessmentHtml +=
                '    <input class="form-check-input" value="1" type="radio" name="operation" id="operation2" >';
            assessmentHtml += '        <label class="form-check-label" for="flexRadioDefault2">Add</label>';
            assessmentHtml += '</div>';
            modalBody.append(assessmentHtml);

            // Show the modal
            $('#staticBackdrop').modal('show');
        } else {
            // Handle the case where there is no data or an error occurred
            flash({
                msg: 'No Assessments found for the course',
                type: 'danger'
            })
        }
    }

    function StrMod4All(classID, exam) {
        var modalBody = $('#staticBackdrop .modal-body');
        modalBody.empty();
        var url = 'login.html';
        $('#assesmentID').val('');

        $.ajax({
            url: url, // Replace with the actual route
            method: 'POST',
            dataType: 'json',
            data: {
                classID: classID,
                exam: exam
            },
            success: function(resp) {
                // Update the display mode with the new value
                // console.log(resp)
                // Check if the response is valid and contains data
                if (resp && 'id' in resp) {
                    // Assuming that you want to update the modal body with data from the response

                    var title = $('#staticBackdropLabel');
                    title.text(resp.course.code + ' - ' + resp.course.name);
                    // Clear the existing content in the modal body
                    modalBody.empty();
                    var assessmentHtml = '<div>';
                    assessmentHtml += '<p class="title">Code: ' + resp.course.code + '</p>';
                    assessmentHtml += '<p class="header">Title: ' + resp.course.name + '</p>';
                    assessmentHtml += '</div>';

                    modalBody.append(assessmentHtml);
                    resp.class_assessments.forEach(function(assessment) {
                        //var assessmentHtml = '<div>';
                        var assessmentHtml = '<div class="assessment" data-apid="' + resp
                            .academic_period_id + '" data-code="' +
                            resp.course.code + '" data-id="' + assessment.assessment_type.id +
                            '"data-outof="' + assessment.total + '">';
                        assessmentHtml += '<p>Assessment: ' + assessment.assessment_type.name +
                            '</p>';
                        assessmentHtml += '<p>Out of: ' + assessment.total + '</p>';
                        // assessmentHtml += '<label for="total">Total:</label>';
                        assessmentHtml +=
                            '<input class="form-control total-input" type="number" name="total" value="0">';
                        assessmentHtml += '<hr>';
                        // Add more fields as needed

                        assessmentHtml += '</div>';

                        modalBody.append(assessmentHtml);
                    });
                    var assessmentHtml = '<br/>';
                    assessmentHtml += ' <div class="form-check">';
                    assessmentHtml +=
                        '    <input class="form-check-input" value="0" type="radio" name="operation" id="operation1" >';
                    assessmentHtml +=
                        '        <label class="form-check-label" for="flexRadioDefault1">Subtract</label>';
                    assessmentHtml += '</div>';
                    assessmentHtml += '<div class="form-check">';
                    assessmentHtml +=
                        '    <input class="form-check-input" value="1" type="radio" name="operation" id="operation2" >';
                    assessmentHtml +=
                        '        <label class="form-check-label" for="flexRadioDefault2">Add</label>';
                    assessmentHtml += '</div>';
                    modalBody.append(assessmentHtml);

                    // Show the modal
                    $('#staticBackdrop').modal('show');
                    $('#assesmentID').val('');
                } else {
                    // Handle the case where there is no data or an error occurred
                    // console.log('No data found in the response or an error occurred.');
                    flash({
                        msg: 'No Assessments found for the course',
                        type: 'danger'
                    })
                    $('#assesmentID').val('');
                }
                //resp.ok && resp.msg ? flash({msg: resp.msg, type: 'success'}) : flash({msg: resp.msg, type: 'danger'});
            },
            error: function(xhr, status, error) {
                flash({
                    msg: error,
                    type: 'danger'
                })
                $('#assesmentID').val('');
            }

        });
        $('#assesmentID').val('');;

    }


    function SubmitData() {
        // Create an array to store the updated "Total" and "key" values
        var updatedAssessments = [];
        var modalBody = $('#staticBackdrop .modal-body');
        var assessmentContainers = modalBody.find('.assessment');
        assessmentContainers.each(function() {
            var assessment = {};
            assessment.total = $(this).find('.total-input').val();
            //assessment.total = $(this).find('.total-input').val();
            assessment.id = $(this).data('id');
            assessment.code = $(this).data('code');
            assessment.apid = $(this).data('apid');
            assessment.outof = $(this).data('outof');
            updatedAssessments.push(assessment);
        });

        let url = 'login.html';
        var radioButtons = $('input[type="radio"]');
        var lastClickedRadioButton = radioButtons.filter(':checked');
        var operation = lastClickedRadioButton.val();
        if (operation === '' || !lastClickedRadioButton.is(':checked')) {
            flash({
                msg: 'Check the operation to undertake',
                type: 'danger'
            });
        } else {
            $.ajax({
                url: url,
                method: 'POST',
                dataType: 'json',
                data: {
                    updatedAssessments: updatedAssessments,
                    operation: operation

                },
                success: function(resp) {
                    // console.log(resp)
                    if (resp.ok === true) {
                        $('#staticBackdrop').modal('hide');

                    } else {
                        $('#staticBackdrop').modal('hide');
                    }
                    resp.ok && resp.msg ? flash({
                        msg: resp.msg,
                        type: 'success'
                    }) : flash({
                        msg: resp.msg,
                        type: 'danger'
                    });
                },
                error: function(xhr, status, error) {
                    flash({
                        msg: error,
                        type: 'danger'
                    })
                }
            });
            $('#staticBackdrop').modal('hide');
        }
        // You now have an array containing objects with "Total" and "key" values
        // console.log(updatedAssessments);
        // $('#staticBackdrop').modal('hide');

        // You can send this data to the server using an AJAX request or perform any other action as needed.
    }


    $('.user-all').change(function(e) {
        var value = $('.user-all:checked').val();
        if (value == 1) {
            $('input[name="ckeck_user"]').prop('checked', true);
            $('.publish-results-board').removeAttr('disabled');
        } else {
            $('input[name="ckeck_user"]').prop('checked', false);
            $('.publish-results-board').attr('disabled', 'disabled');
        }
    });


    $("input[name='ckeck_user']").change(function() {
        if ($("input[name='ckeck_user']:checked").length > 0) {
            $('.publish-results-board').removeAttr('disabled');
        } else {
            $('.publish-results-board').attr('disabled', 'disabled');
        }
    });

    $('.publish-results-board').click(function(e) {
        e.preventDefault();
        var ids = [];

        $.each($('input[name="ckeck_user"]:checked'), function() {
            ids.push($(this).data('id'));
        });
        var academic = $('input[name="academic"]').val();
        var type = $('input[name="type"]').val();
        // console.log(academic);
        if (ids != '') {
            $(this).attr("disabled", true);
            $(this).html('<i class="fa fa-spinner fa-spin"></i> Publish Results');
            $.ajax({
                url: 'https://sms.zut.ac.zm/assessments/publish-program-results',
                type: 'POST',
                data: {
                    _token: $('meta[name="csrf-token"]').attr('content'),
                    ids: ids,
                    academicPeriodID: academic,
                    type: type
                },
                success: function(resp) {
                    // console.log(resp)
                    $('.success-mail').css('display', 'block');
                    $('.publish-results-board').attr("disabled", false);
                    $('.publish-results-board').html(
                        '<i class="fa fa-share"></i> Publish Results');

                    resp.ok && resp.msg ? flash({
                        msg: resp.msg,
                        type: 'success'
                    }) : flash({
                        msg: resp.msg,
                        type: 'danger'
                    });

                },
                error: function(xhr, status, error) {
                    flash({
                        msg: error,
                        type: 'danger'
                    })
                    $('.success-mail').css('display', 'block');
                    $('.publish-results-board').attr("disabled", false);
                    $('.publish-results-board').html(
                        '<i class="fa fa-share"></i> Publish Results');
                }
            });
        }
    });

    function LoadMoreResultsCas(current_page, last_page, per_page, program, academic, level) {

        // $('.load-more-results').attr("disabled", true);
        // $('.load-more-results').html('<i class="fa fa-spinner fa-spin"></i> Load More');


        $.ajax({
            url: 'https://sms.zut.ac.zm/assessments/cas/load-more',
            type: 'POST',
            data: {
                _token: $('meta[name="csrf-token"]').attr('content'),
                current_page: current_page,
                last_page: last_page,
                per_page: per_page,
                program: program,
                academic: academic,
                level: level
            },
            success: function(response) {
                // console.log(response)
                if (response && Object.keys(response.students).length > 0) {
                    $.each(response.students, function(studentId, student) {
                        var coursesHtml = '';
                        let counter = 1;
                        $.each(student.courses, function(courseId, course) {
                            var totalSum = 0,
                                totalCa = 0;
                            coursesHtml += `
                <tr>
                    <td>${counter++}</td>
                    <td>${course.course_details.course_code}</td>
                    <td>${course.course_details.course_title}</td>
                    <td>
                        <table class="table table-bordered table-hover table-striped">
                            <tbody>
                                <tr>
                                    <td>Assessment Type</td>
                                    <td>Total</td>
                                    <td>Out of</td>
<!--                                    <td>Grade</td> <td>//</td> -->
                                </tr>`;

                            $.each(course.course_details.student_grades, function(index,
                                grades) {
                                totalSum += grades.outof;
                                totalCa += grades.total;
                                coursesHtml += `
                                <tr>
                                    <td>${grades.type}</td>
                                    <td>${grades.total}</td>
                                    <td>${grades.outof}</td>

                                </tr>`;
                            });

                            coursesHtml += `   </tbody>
                        </table>
                    </td>`;
                            coursesHtml += `<td>${totalCa}  out of  ${totalSum} </td>
                <td><a onclick="modifyMarksCAsL('${studentId}','${student.name}','${course.course_details.course_code}','${course.course_details.course_title}','${encodeURIComponent(JSON.stringify(course.course_details.student_grades))}')"
                                                               class="nav-link"><i class="icon-pencil"></i></a></td>
                </tr>`;
                        });

                        var studentHtml = `
            <table class="table table-hover table-striped-columns mb-3">
                <div class="justify-content-between">
                    <h5>
                        <strong>${student.name}</strong>
                        <p>${studentId}</p>
                    </h5>
                </div>
                <thead>
                    <tr>
                        <th>S/N</th>
                        <th>Course Code</th>
                        <th>Course Name</th>
                        <th>Assessments</th>
                        <th>CA</th>
                         <th>Modify</th>
                    </tr>
                </thead>
                <tbody>${coursesHtml}</tbody>
            </table>

            <p class="bg-success p-3 align-bottom">Comment: ${student.calculated_grade.comment}
            <input onchange="checkdata()" type="checkbox" name="ckeck_user" value="${1}" class="ckeck_user float-right p-5" data-id="${studentId}">
                <label for="publish" class="mr-3 float-right">Publish</label>
            </p>
            <hr>
        `;
                        updateLoadMoreButtonCAs(response, program, academic, level);

                        $('.loading-more-results').append(studentHtml);
                        $('#pagenumbers').text('Page ' + response.current_page + ' of ' +
                            response.last_page)
                    });

                    if (response.last_page === response.current_page) {
                        $('.load-more-results').hide();
                    }

                    flash({
                        msg: 'success',
                        type: 'success'
                    });
                } else {
                    $('.load-more-results').hide();
                    flash({
                        msg: 'No data to display',
                        type: 'warning'
                    });
                }
                // $('.load-more-results-first').hide();
            },
            error: function(xhr, status, error) {
                flash({
                    msg: error,
                    type: 'danger'
                })

                // $('.loading-more-results').attr("disabled", false);
                // $('.loading-more-results').html('<i class="fa fa-share"></i> Load More');
            }
        });
    }

    function LoadMoreResults(current_page, last_page, per_page, program, academic, level) {

        // $('.load-more-results').attr("disabled", true);
        // $('.load-more-results').html('<i class="fa fa-spinner fa-spin"></i> Load More');
        //console.log(current_page, last_page, per_page, program, academic, level);


        $.ajax({
            url: 'https://sms.zut.ac.zm/assessments/exams/load-more',
            type: 'POST',
            data: {
                _token: $('meta[name="csrf-token"]').attr('content'),
                current_page: current_page,
                last_page: last_page,
                per_page: per_page,
                program: program,
                academic: academic,
                level: level
            },
            success: function(response) {
                // console.log(response.data)

                if (response && Object.keys(response.students).length > 0) {
                    $.each(response.students, function(studentId, student) {
                        var coursesHtml = '';
                        $.each(student.courses, function(courseId, course) {
                            coursesHtml += `
                <tr>
                    <td>0</td>
                    <td>${course.course_details.course_code}</td>
                    <td>${course.course_details.course_title}</td>
                    <td>
                        <table class="table table-bordered table-hover table-striped">
                            <tbody>
                                <tr>
                                    <td>CA</td>
                                    <td>Exam</td>
                                    <td>Total</td>
                                    <td>Grade</td>
                                </tr>`;
                            if (course.course_details.student_grades[0].exam !== "NE") {
                                coursesHtml += `
                                <tr>
                                    <td>${course.course_details.student_grades[0].ca}</td>
                                    <td>${course.course_details.student_grades[0].exam + ' out of ' + course.course_details.student_grades[0].outof}</td>
                                    <td>${course.course_details.student_grades[0].total_sum}</td>
                                    <td>${course.course_details.student_grades[0].grade}</td>
                                </tr>`;
                            }
                            coursesHtml += `   </tbody>
                        </table>
                    </td>
                </tr>`;
                        });

                        var studentHtml = `
            <table class="table table-hover table-striped-columns mb-3">
                <div class="justify-content-between">
                    <h5>
                        <strong>${student.name}</strong>
                        <p>${studentId}</p>
                    </h5>
                </div>
                <thead>
                    <tr>
                        <th>S/N</th>
                        <th>Course Code</th>
                        <th>Course Name</th>
                        <th>Assessments</th>
                        <th>Modify</th>
                    </tr>
                </thead>
                <tbody>${coursesHtml}</tbody>
            </table>

            <p class="bg-success p-3 align-bottom">Comment: ${student.calculated_grade.comment}
            <input onchange="checkdata()" type="checkbox" name="ckeck_user" value="${1}" class="ckeck_user float-right p-5" data-id="${studentId}">
                <label for="publish" class="mr-3 float-right">Publish</label>
            </p>
            <hr>
        `;
                        $('.loading-more-results').append(studentHtml);
                        $('#pagenumbers').text('Page ' + response.current_page + ' of ' +
                            response.last_page)
                    });

                    if (response.last_page === response.current_page) {
                        $('.load-more-results').hide();
                    }

                    flash({
                        msg: 'success',
                        type: 'success'
                    });
                } else {
                    $('.load-more-results').hide();
                    flash({
                        msg: 'No data to display',
                        type: 'warning'
                    });
                }

            },
            error: function(xhr, status, error) {
                flash({
                    msg: error,
                    type: 'danger'
                })
            }
        });
    }

    function updateLoadMoreButton(academicData, program, academic, level) {
        // Dynamically set the onclick function with the new academicData
        var button = $('.load-more-results-first');
        button.attr('onclick',
            `LoadMoreResults('${academicData.current_page}', '${academicData.last_page}', '${academicData.per_page}', '${program}', '${academic}', '${level}')`
        );
    }

    function updateLoadMoreButtonCAs(academicData, program, academic, level) {
        // Dynamically set the onclick function with the new academicData
        // console.log(program);
        var button = $('.load-more-results-first-cas');
        button.attr('onclick',
            `LoadMoreResultsCas('${academicData.current_page}', '${academicData.last_page}', '${academicData.per_page}', '${program}', '${academic}', '${level}')`
        );
    }

    function checkdata() {
        if ($('.ckeck_user').is(':checked')) {
            $('.publish-results-board').removeAttr('disabled');
        } else {
            $('.publish-results-board').attr('disabled', 'disabled');
        }
    }

    function CloseModal() {
        $('#staticBackdrop').modal('hide');
    }

    function EnterResultsu(id, classID, total, type) {
        let actual = $('#class' + classID).val();

        var displaymode = $('#display-mode' + classID);
        var textContent = displaymode.text();
        var input = $('#class' + classID);
        var newValues = ((actual / 100) * total).toFixed(2);

        if (type === 1) {
            let url = 'login.html';
            $.ajax({
                url: url, // Replace with the actual route
                method: 'POST',
                dataType: 'json',
                data: {
                    total: actual,
                    id: id,
                },
                success: function(resp) {
                    // Update the display mode with the new value
                    console.log(resp)
                    if (resp.ok === true) {
                        displaymode.text(newValues);
                        displaymode.show();
                        input.hide();
                    } else {
                        displaymode.text(textContent);
                        displaymode.show();
                        input.hide();
                    }
                    resp.ok && resp.msg ? flash({
                        msg: resp.msg,
                        type: 'success'
                    }) : flash({
                        msg: resp.msg,
                        type: 'danger'
                    });
                },
                error: function(xhr, status, error) {
                    flash({
                        msg: error,
                        type: 'danger'
                    })
                }
            });
        }
    }
    // Handle select input on enrolments report pages
    const getProgramsByAcademicPeriod = (academicPeriodIds, programsSelector) => {
        $.ajax({
            url: `/academic-periods/${academicPeriodIds}/programs`,
            type: "GET",
            dataType: "json",
            success: (data) => {
                $(programsSelector).empty();
                $(programsSelector).append(`<option disabled>Choose programs</option>`)

                $.each(data, (_, value) => {
                    $(programsSelector).append(
                        `<option value="${value.id}">${value.name}</option>`);
                });
            }
        });
    }

    // Mask NRC input
    const maskNRC = () => {
        $('#nrc').on('input', function() {
            var nrc = $(this).val().replace(/\D/g, '');

            if (nrc.length > 6) {
                nrc = nrc.substring(0, 6) + '/' + nrc.substring(6);
            }

            if (nrc.length > 9) {
                nrc = nrc.substring(0, 9) + '/' + nrc.substring(9);
            }

            $(this).val(nrc);
        });
    }


    // // Inline Editale Table Rows
    // $.fn.editable.defaults.mode = 'inline';

    // $.ajaxSetup({
    //     headers: {
    //         'X-CSRF-TOKEN': "fddNla9tWUMLhyBfZrF36eWwYwk8ABvlyPgtlON3"
    //     }
    // })

    $(document).ready(() => {
        // Editable marks (student.show)
        // $('.editable').editable();

        $('#academic-period-ids').change(function() {
            const academicPeriodIds = $(this).val();

            if (academicPeriodIds.length > 0) {
                getProgramsByAcademicPeriod(academicPeriodIds, '#program-ids');
            } else {
                $('#program-ids').empty();
            }
        });

        maskNRC();
    })
</script>

<!-- Modal -->
<div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
    aria-labelledby="staticBackdropLabel" aria-hidden="false">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content row col card card-body">
            <div class="modal-header">
                <h5 class="modal-title" id="staticBackdropLabel">Modal title</h5>
                <div class="list-icons">
                    <a type="submit" class="btn btn-outline-light" onclick="CloseModal()"><i
                            class="icon-close2 ml-2"></i></a>
                </div>
            </div>
            <div class="modal-body p-3">
                ...
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary closeModalButton" onclick="CloseModal()"
                    id="closeModalButton" data-bs-dismiss="modal">
                    Close
                </button>
                <button type="button" onclick="SubmitData()" class="btn btn-primary">Submit</button>
            </div>
        </div>
    </div>
</div>
    </body>


<!-- Mirrored from sms.zut.ac.zm/start-application by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 21 Jan 2026 17:40:16 GMT -->
</html>
